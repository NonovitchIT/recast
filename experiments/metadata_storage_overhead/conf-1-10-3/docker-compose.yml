# Generated by configure.py on 2017-09-11T15:31:04.964422
---
version: "3"
services:
    proxy:
        build: ./pyproxy
        ports:
          - "3000:8000"
        env_file:
          - ./erasure.env
        deploy:
            mode: replicated
            placement:
                constraints: [node.role == manager]
        volumes:
          - ./pyproxy/:/usr/local/src/pyproxy

    coder:
        build: ./pycoder
        environment:
          - sec_measure=confd
        env_file:
          - ./erasure.env
        deploy:
            mode: replicated
            placement:
                constraints: [node.role == manager]

    zoo1:
        image: zookeeper
        restart: always
        ports:
          - 2181:2181
        environment:
          - ZOO_MY_ID=1
        deploy:
            mode: replicated
            placement:
                constraints: [node.role == manager]

    metadata:
        image: redis:3.2.8
        deploy:
            mode: replicated
            placement:
                constraints: [node.role == manager]
        volumes:
          - ./volumes/metadata/:/data/

    redis:
        image: redis:3.2.8
        deploy:
            placement:
                constraints:
                  - node.role == worker
        container_name: redis
